"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};
/*!
* iCrush v0.1.0
* (c) 2007-2020 心叶 git+https://github.com/yelloxing/iCrush.git
* License: MIT
*/!function(){var t=Object.prototype.toString;function e(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":t.call(e)}function n(t){var e=void 0===t?"undefined":_typeof2(t);return null!=t&&("object"===e||"function"===e)}function r(t){if(!n(t))return!1;var r=e(t);return"[object Function]"===r||"[object AsyncFunction]"===r||"[object GeneratorFunction]"===r||"[object Proxy]"===r}var o=1;var i=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function n(t,o,i){return(n=e()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i}).apply(null,arguments)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)})(t)}!function(){var e=Object.prototype.toString;function r(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e.call(t)}function u(t){var e=i(t);return"string"===e||"object"===e&&null!=t&&!Array.isArray(t)&&"[object String]"===r(t)}var c=function t(e,n){for(var r=0;r<n.length;r++)(function(t){return null!=t&&"function"!=typeof t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)})(o=n[r])&&!u(o)?n[r].length>1?t(e,n[r]):1===n[r].length&&e.push(n[r][0]):e.push(n[r]);var o};function l(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c(t,n),t}function a(t){return null!==t&&"object"===i(t)&&(1===t.nodeType||9===t.nodeType||11===t.nodeType)&&!function(t){if(null===t||"object"!==i(t)||"[object Object]"!=r(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t)}function f(t){var e=i(t);return null!=t&&("object"===e||"function"===e)}var s=function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new t.prototype.init(n)};s.prototype.init=function(t){t=l.apply(void 0,o(t)),this.length=0;for(var e=0;e<t.length;e++)a(t[e])&&(this[this.length]=t[e],this.length+=1);return this},s.prototype.extend=s.extend=function(){var t=arguments[0]||{},e=arguments[1]||{},n=arguments.length;for(var r in 1===n&&(e=t,t=this),f(t)||(t={}),e)try{t[r]=e[r]}catch(t){throw new Error("Illegal property value！")}return t},s.prototype.init.prototype=s.prototype;function p(t){if(a(t))return t;if(u(t))return function(t){var e=document.createElement("div");e.innerHTML=t;for(var n=e.childNodes,r=0;r<n.length;r++)if(a(n[r]))return n[r];return null}(t);throw new Error("Illegal template!")}function h(t){if(!f(t))return!1;var e=r(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object Proxy]"===e}var d=function(t,e){return t=" "+t+" ",e=" "+e.trim()+" ",t.indexOf(e)>-1},v=function(t,e){for(t=" "+t+" ",e=" "+e.trim()+" ";t.indexOf(e)>-1;)t=t.replace(e," ");return t.trim().replace(/ +/g," ")};function y(t,e){var n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle;return"string"==typeof e?n.getPropertyValue(e):n}if(s.prototype.extend({append:function(t){return this.length>0&&this[0].appendChild(p(t)),this},prepend:function(t){return this.length>0&&this[0].insertBefore(p(t),this[0].childNodes[0]),this},after:function(t){return this.length>0&&this[0].parentNode.insertBefore(p(t),this[0].nextSibling),this},before:function(t){return this.length>0&&this[0].parentNode.insertBefore(p(t),this[0]),this},find:function(t,e){(h(t)||arguments.length<1)&&(e=t,t="*");var n=this[0].getElementsByTagName(t);if(!h(e))return this.new(n);for(var r=this.new(),o=0;o<n.length;o++)e(n[o])&&(r[r.length++]=n[o]);return r},parents:function(t,e){for(var n=[],r=this[0].parentNode;a(r)&&(h(t)&&!t(r)||n.push(r),!h(e)||!e(r));)r=r.parentNode;return this.new(n)},children:function(t){for(var e=this[0].childNodes,n=this.new(),r=0;r<e.length;r++)!a(e[r])||h(t)&&!t(e[r])||(n[n.length++]=e[r]);return n},eq:function(t){var e=this.new();return this.length>t&&(e[0]=this[t],e.length=1),e},remove:function(){for(var t=0;t<this.length;t++)this[t].parentNode.removeChild(this[t]);return this},attr:function(t,e){if(arguments.length<2)return this.length>0?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n++)this[n].setAttribute(t,e);return this},css:function(){if(arguments.length<=1&&(arguments.length<=0||"object"!==i(arguments[0]))){if(this.length<=0)return;return y(this[0],arguments[0])}for(var t=0;t<this.length;t++)if(1===arguments.length)for(var e in arguments[0])this[t].style[e]=arguments[0][e];else this[t].style[arguments[0]]=arguments[1];return this},hasClass:function(t){var e=this[0].getAttribute("class");return d(e,t)},addClass:function(t){var e=this[0].getAttribute("class");return d(e,t)||this[0].setAttribute("class",e+" "+t),this},removeClass:function(t){var e=this[0].getAttribute("class"),n=v(e,t);return this[0].setAttribute("class",n),this},toggerClass:function(t){var e=this[0].getAttribute("class");if(d(e,t)){var n=v(e,t);this[0].setAttribute("class",n)}else this[0].setAttribute("class",e+" "+t);return this},bind:function(t,e){if(window.attachEvent)for(var n=0;n<this.length;n++)this[n].attachEvent("on"+t,e);else for(var r=0;r<this.length;r++)this[r].addEventListener(t,e,!1);return this},unbind:function(t,e){if(window.detachEvent)for(var n=0;n<this.length;n++)this[n].detachEvent("on"+t,e);else for(var r=0;r<this.length;r++)this[r].removeEventListener(t,e,!1);return this},trigger:function(t){var e,n;if(document.createEventObject)for(n=document.createEventObject(),e=0;e<this.length;e++)this[e].fireEvent("on"+t,n);else for((n=document.createEvent("HTMLEvents")).initEvent(t,!0,!1),e=0;e<this.length;e++)this[e].dispatchEvent(n);return this},size:function(t){var e,n,r=this[0];return"content"==t?(n=r.clientWidth-(y(r,"padding-left")+"").replace("px","")-(y(r,"padding-right")+"").replace("px",""),e=r.clientHeight-(y(r,"padding-top")+"").replace("px","")-(y(r,"padding-bottom")+"").replace("px","")):"padding"==t?(n=r.clientWidth,e=r.clientHeight):"border"==t?(n=r.offsetWidth,e=r.offsetHeight):"scroll"==t?(n=r.scrollWidth,e=r.scrollHeight):(n=r.offsetWidth,e=r.offsetHeight),{width:n,height:e}},mousePosition:function(t){var e=this[0].getBoundingClientRect();if(!t||!t.clientX)throw new Error("Event is necessary!");return{x:t.clientX-e.left,y:t.clientY-e.top}},offsetPosition:function(){var t=0,e=0,n=this[0];for(e=n.offsetTop,t=n.offsetLeft,n=n.offsetParent;n;)e+=n.offsetTop,t+=n.offsetLeft,n=n.offsetParent;return{left:t,top:e}}}),s.extend({stopPropagation:function(t){(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1}}),s.prototype.new=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(s,e)},"object"===i(t)&&"object"===i(t.exports))t.exports=s;else{var g=window.xhtml;s.noConflict=function(t){return window.xhtml=g,s},window.xhtml=s}}()}));function u(t){var n=void 0===t?"undefined":_typeof2(t);return"symbol"===n||"object"===n&&null!==t&&"[object Symbol]"===e(t)}function c(t,e){return Array.isArray(t)?t:function(t,e){if(Array.isArray(t))return!1;var n=void 0===t?"undefined":_typeof2(t);return!("number"!=n&&"boolean"!=n&&null!=t&&!u(t))||(null!==e&&t in Object(e)||/^\w*$/.test(t))}(t,e)?[t]:function(t){return t.replace(/\[/g,".").replace(/\]/g,"").replace(/"/g,"").replace(/'/g,"").split(".")}(t)}function l(t){if("string"==typeof t||u(t))return t;var e=""+t;return"0"===e&&1/t==-1/0?"-0":e}function a(t,e,n){var r=null==t?void 0:function(t,e){e=c(e,t);for(var n=0;n<e.length&&null!==t;n++)t=t[l(e[n])];return n&&n===e.length?t:void 0}(t,e);return void 0===r?n:r}function f(t,e,n){!function(t,e,n){"__proto__"==e?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}(t,e,n)}function s(t,e,r,o){return o="function"==typeof o?o:void 0,null==t?t:function(t,e,r,o){if(!n(t))return t;e=c(e,t);for(var i=t,u=0;u<e.length;u++){var a=l(e[u]),s=r;if(u+1!=e.length){var p=i[a];n(p)?s=p:void 0===(s=o?o(p,a,i):void 0)&&(s={})}f(i,a,s),i=i[a]}return t}(t,e,r,o)}function p(t){var n=void 0===t?"undefined":_typeof2(t);return"string"===n||"object"===n&&null!=t&&!Array.isArray(t)&&"[object String]"===e(t)}function h(t,e,n){var r=document.createElement(t),o=[],i=[],u=[],c=[],l=[];if(/ui\-/.test(t.toLowerCase()))return{el:r,tagName:t.toLowerCase(),attrs:e,directive:[],textBind:[],event:[],component:[],dynamicComponent:[]};for(var a in"component"==t.toLowerCase()&&(n=[],l.push({el:r})),e=e||{})/^v-/.test(a)?o.push({el:r,name:a.replace("v-",""),value:e[a]}):/^@/.test(a)?i.push({el:r,name:a,value:e[a]}):r.setAttribute(a,e[a]);n=n||[];for(var f=0;f<n.length;f++){var s=n[f];if(p(s)){var h=s;s={el:document.createTextNode(h),text:h},/{{[^}]+}}/.test(h)&&u.push(s)}else{for(var d=0;d<s.directive.length;d++)o.push(s.directive[d]);for(var v=0;v<s.event.length;v++)i.push(s.event[v]);for(var y=0;y<s.component.length;y++)c.push(s.component[y]);for(var g=0;g<s.dynamicComponent.length;g++)l.push(s.dynamicComponent[g]);for(var m=0;m<s.textBind.length;m++)u.push(s.textBind[m])}s.tagName&&c.push(s),r.appendChild(s.el)}return{el:r,directive:o,textBind:u,event:i,component:c,dynamicComponent:l}}function d(t){if(null===t||"object"!==(void 0===t?"undefined":_typeof2(t))||"[object Object]"!=e(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}function v(t){return null!==t&&"object"===(void 0===t?"undefined":_typeof2(t))&&(1===t.nodeType||9===t.nodeType||11===t.nodeType)&&!d(t)}var y=function(t,e){for(var n=0;n<e.length;n++){var r=e[n].text.replace(/{{[^}]+}}/g,(function(e){return a(t,e.replace("{{","").replace("}}",""))})),o=document.createTextNode(r);e[n].el.parentNode.replaceChild(o,e[n].el),e[n].el=o}},g=function(t,e,n){for(var o=0;o<e.length;o++){var i=e[o],u=(i.name+":").split(":"),c=t.$directive[u[0]];if(!c)throw new Error("The directive is not registered:v-"+i.name);r(c[n])&&c[n].call(c,i.el,{value:a(t,i.value),arg:i.value,type:u[1],target:t})}},m=function(t,e,n){for(var r=0;r<e.length;r++){var o=e[r];if(n||o.el._dynamic_component_!=o.el.getAttribute("is")){o.el._dynamic_component_=o.el.getAttribute("is"),o.el.innerHTML="<i></i>";var i=o.el.firstElementChild,u=t.$component[o.el._dynamic_component_];u.el=i,t._new(u)}}};function b(t){return function(e){return function t(e,n){for(var r,o=e.childNodes,i=[],u=0;u<o.length;u++)null===(r=o[u])||"object"!==(void 0===r?"undefined":_typeof2(r))||3!==r.nodeType||d(r)?v(o[u])&&i.push(t(o[u],n)):i.push(o[u].textContent);for(var c={},l=0;l<e.attributes.length;l++)c[e.attributes[l].nodeName]=e.attributes[l].nodeValue;return n(e.tagName,c,i)}(function(t){if(v(t))return t;var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}(t),e)}}function w(t){if(!(this instanceof w))throw new Error("iCrush is a constructor and should be called with the `new` keyword");this._lifecycle(t.beforeCreate),this._init(t),this._lifecycle("created"),v(this.el)&&(this._lifecycle("beforeMount"),this._mount(this.el),this._lifecycle("mounted"))}!function(t){t.prototype._init=function(t){for(var e in this.$uid=o++,t=t||{}){if(/^[_$]/.test(e))throw new Error("The beginning of _and $is not allowed："+e);this[e]=t[e]}r(this.data)&&(this.data=this.data())}}(w),function(t){t.prototype._bind=function(t,e,n){var r=this,o=n.replace(/\([^)]{0,}\)/,""),u=n.replace(/[^(]{1,}\({0,1}([^)]{0,})\){0,1}/,"$1").split(",");i(t).bind(e,(function(){r.methods[o].apply(r,u)}))}}(w),function(t){t.prototype._lifecycle=function(t){r(t)?t():["created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed"].indexOf(t)>-1&&r(this[t])&&this[t].call(this)}}(w),function(t){t.prototype._mountComponent=function(t){var e=this.render(h),n=e.el;this.el.parentNode.replaceChild(n,this.el),this.el=n,this.$directiveE=e.directive,this.$textBindE=e.textBind,this.$dynamicComponent=e.dynamicComponent,y(this,this.$textBindE),g(this,this.$directiveE,"inserted"),m(this,this.$dynamicComponent,!0),function(t){var e=function(e){var n=a(t.data,e);Object.defineProperty(t.data,e,{get:function(){return n},set:function(e){t._lifecycle("beforeUpdate"),n=e,t._updateComponent(),t._lifecycle("updated")}})};for(var n in t.data)e(n)}(this);for(var r=0;r<e.event.length;r++)this._bind(e.event[r].el,e.event[r].name.replace(/^@/,""),e.event[r].value);e.tagName&&/^ui\-/.test(e.tagName)&&(e.component=[{el:e.el,tagName:e.tagName,attrs:e.attrs}]);for(var o=0;o<e.component.length;o++){var i=this.$component[e.component[o].tagName.replace(/^ui\-/,"")];if(!i)throw new Error("The component is not registered:"+e.component[o].tagName);if(i.el=e.component[o].el,Array.isArray(i.props)){for(var u={},c=0;c<i.props.length;c++)s(u,i.props[c],a(e.component[c].attrs,i.props[c]));i.props=u}this._new(i).$pid=this.$uid}},t.prototype._updateComponent=function(){y(this,this.$textBindE),g(this,this.$directiveE,"update"),m(this,this.$dynamicComponent)}}(w);var j=function(t,e){e.value&&!p(e.value)&&(e.value=JSON.stringify(e.value)),""==e.type||"value"==e.type?t.value=t.textContent=e.value:t.setAttribute(e.type,e.value)},_={inserted:j,update:j},x={inserted:function(t,e){t.value=e.value,i(t).bind("input",(function(){s(e.target,e.arg,t.value)}))},update:function(t,e){t.value=e.value}};!function(t){t.prototype.$directive={},t.directive=function(e,n){if(t.prototype.$directive[e])throw new Error("The directive has already been defined:v-"+e);t.prototype.$directive[e]=n},t.prototype.$component={},t.component=function(e,n){if(t.prototype.$component[e])throw new Error("The component has already been defined:ui-"+e);t.prototype.$component[e]=n},t.prototype._new=function(e){return new t(e)}}(w),w.directive("bind",_),w.directive("model",x),w.prototype._mount=function(t){if(!r(this.render)){var e=this.template;e&&p(e)||(e=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t)),this.render=b(e)}this._mountComponent(t)},"object"===("undefined"==typeof module?"undefined":_typeof2(module))&&"object"===_typeof2(module.exports)?module.exports=w:window.iCrush=w}();